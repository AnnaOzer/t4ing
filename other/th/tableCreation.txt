1) указываются параметры бд
config.php db

2) создаются таблицы, которые в дальнейшем всегда будут главными
ингредиенты и продукты
php protected\t4.php /migrate/create --name=createIngr
php protected\t4.php /migrate/create --name=createProducts

php protected\t4.php /migrate

3) создается справочник альтернативных названий ингредиентов
php protected\t4.php /migrate/create --name=createIngrextras
php protected\t4.php /migrate/create --name=createProductextras
php protected\t4.php /migrate

каждой строке ингредиента соответствует сколько угодно альтернативных названий

далее, когда мы будем смотреть на готовую рецептуру, будет кнопка в конце каждой строки
сменить название,
и будет ссылка на форму, где можно выбрать из имеющихся названий, включая рецептурное
или создать другое название, далее запрос - применить ли новое название в изменяемой рецептуре.

4) создается таблица реальной рецептуры
она зависит от таблиц продукт и ингредиенты
поле процентное содержание будет строкой
при расчетах надо будет приводить к числу

5) создается таблица учета сертификационной рецептуры,
зависит от таблицы продукты
далее можно будет просматривать список сертификационных рецептур к данному продукту
и создавать новую на базе производственной
и возможно но не критично - копировать существующую серт рецептуру
должна быть галочка активная рецептура и кнопка активировать\дезактивировать
в списке серт рецептур к данному продукту
и кнопка просмотреть рецептуру

6) создается таблица процентовки в сертификационной процедуре.
таблица будет заполняться по кнопке на основе реальной производственной рецептуры для
данного продукта
будет поле процент и поле код интервала

7) создается таблица интервалов с возможностью добавить еще один свой интервал
есть опция не определен (для нуля пишем прочерк),
заполняется скриптом на основе анализа процентовки и указания куда округлять, заданного в таблице ингредиенты
по какой-то шкале, пусть от 0 до 10
можно менять вручную

8) в таблице ингредиенты будет приоритет для сортировки при условии одинаковых процентовок

9) в таблицу ингредиентов
пишутся объединенные ингредиенты (один или все)
их наименования присутствуют в таблице псевдонимов ингредиентов
объединенные ингредиенты имеют отдельную галочку, имеют параметры куда округлять и приоритетность в сортировке

10) создается таблица замен
просто айди замены
в таблице сертификационных процентовок будет айди замены, почти везде пустой

------
php protected\t4.php /migrate/create --name=createInputs
php protected\t4.php /migrate/create --name=createChanges